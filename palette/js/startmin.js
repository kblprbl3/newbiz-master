var num=0;var constdata={onoff:[],values:[]};var LUSTRA_TEN=6;var LUSTRA=4;var onToggleVal=[];var onOnOffVal=[];var openedI=-1;function SetFactura(){console.log('SetFactura...');var factura=$('#factura option:checked').val();var facturaSel=factura;var opacity=1;if(factura==1){opacity=0.4;factura=1;setElement(8,0);}if(factura==2){opacity=0.7;factura=1;setElement(8,0)}if(factura==3){opacity=0.5;factura=1;setElement(8,1);}if(factura==0){setElement(8,2);}console.log(factura);if(constdata.factura==undefined){constdata.factura=0;}constdata.factura=facturaSel;console.log('constdata.factura='+constdata.factura);$('#a-6-'+factura).click();$('#img-6-'+factura).css('opacity',opacity);saveUserVals();}$(".first").click(function(){if($(this).parent().find(".second").hasClass("on"),$(this).parent().find(".tumbler").hasClass("on")){$(this).parent().find(".second").removeClass("on"),$(this).parent().find(".tumbler").removeClass("on"),$(this).addClass("on");}return false;});$('.lamp-5 ').click(function(){if(!$('#checkbox-5').prop('checked')){$('#checkbox-5').click();}});$('.lamp-4 ').click(function(){if(!$('#checkbox-4').prop('checked')){$('#checkbox-4').click();}});$(".second").click(function(){if($(this).parent().find(".first").hasClass('on')){$(this).parent().find(".first").removeClass('on'),$(this).addClass('on'),$(this).parent().find(".tumbler").addClass('on');}return false;});$(".tumbler").click(function(){if($(this).hasClass('on'),$(this).parent().find(".second").hasClass('on')){$(this).removeClass('on'),$(this).parent().find(".second").removeClass('on'),$(this).parent().find(".first").addClass('on');}else{$(this).addClass('on'),$(this).parent().find(".first").removeClass('on'),$(this).parent().find(".second").addClass('on');}return false;});function setCeiling(i){console.log("setCeiling ="+i);var svg=$('.ceiling-item-'+i).data('svg');$('.seling-selected').css('background-image','url('+svg+')');$('.ceiling').hide();$('.ceiling-'+i).show();$('.ceiling-item').removeClass('active');$('.ceiling-item-'+i).addClass('active');if(constdata.ceiling==undefined){constdata.ceiling=0;}constdata.ceiling=i;$('.img-group-7').hide();setElement(0,i);if(constdata.onoff[5]==1){}else{$('.img-group-0').hide();}saveUserVals();}function setElement(i,j,nosave){constdata.values[i]=j;var obj=data[num].elements[i].value[j];$('.img-group-'+i).hide();$('#img-'+i+'-'+j).show();$('.nav-'+i).find('.menu-icon').removeClass('active');$('#a-'+i+'-'+j).addClass('active');var style=$('#a-'+i+'-'+j).find('.image').attr('style');$('.selected-item-'+i).attr('style',style);if(nosave!=1){saveUserVals();}if(constdata.onoff[LUSTRA]==0){$('.img-group-6').hide();}}function onToggle(i){if(onToggleVal[i]==1){onToggleVal[i]=0;}else{onToggleVal[i]=1;}if(onToggleVal[i]===1){$('.lamp-'+i).addClass('off');}else{$('.lamp-'+i).removeClass('off');}if(constdata.ontoggle==undefined){constdata.ontoggle=[];}constdata.ontoggle[i]=onToggleVal[i];if(i===5){$('.img-group-0').hide();$('.img-group-7').hide();if(onToggleVal[i]==1){console.log("свет выкл");$('#img-7-'+constdata.ceiling).show();}else{console.log("свет вкл");$('#img-0-'+constdata.ceiling).show();}}saveUserVals();setElement(i,onToggleVal[i]);console.log(constdata.ontoggle);}function onOnOffSvt(){var i=5;console.log('onOnOffSvt>>>>>>>>>>>>>>>>>>>>> ');if(constdata.ontoggle==undefined){constdata.ontoggle=[];constdata.ontoggle[i]=0;}console.log('constdata.ontoggle[i]> '+constdata.ontoggle[i]);console.log('constdata.onoff[i]> '+constdata.onoff[i]);console.log('constdata.ceiling> '+constdata.ceiling);$('.img-group-0').hide();$('.img-group-7').hide();if(constdata.onoff[i]==0){console.log("11111");}else{console.log("2222");if(constdata.ontoggle[i]==1){console.log("свет выкл");$('#img-7-'+constdata.ceiling).show();}else{console.log("свет вкл");$('#img-0-'+constdata.ceiling).show();}}}function onOnOff(i){if(onOnOffVal[i]==1){onOnOffVal[i]=0;}else{onOnOffVal[i]=1;}console.log('onOnOffVal[i] > '+onOnOffVal[i]);if(onOnOffVal[i]==0){$('#img-'+i+'-0').hide();$('#img-'+i+'-1').hide();$('#checkbox-'+i).prop("checked",false);}else{if(constdata.values[i]==undefined){constdata.values[i]=0;$('#checkbox-'+i).prop("checked",true);}$('#img-'+i+'-'+constdata.values[i]).show();}if(i===4){console.log('---------------------ЛЮСТРА----------------------------- ');$('#img-'+5+'-0').hide();$('#img-'+5+'-1').hide();$('#img-'+6+'-0').hide();$('#img-'+6+'-1').hide();if(onOnOffVal[i]==0){console.log('---------------------ЛЮСТРА  ВЫКЛ ----------------------------- ');}else{console.log('---------------------ЛЮСТРА  ВКЛ ----------------------------- ');$('#img-'+5+'-'+constdata.factura).show();$('#img-'+6+'-'+1).show();}}if(constdata.onoff==undefined){constdata.onoff=[];}constdata.onoff[i]=onOnOffVal[i];if(i==5){onOnOffSvt();}saveUserVals();}$(function(){setHome(0);setSelectedUserVal();$('.ajaxform').submit(function(){var data=$(this).serialize();var formsuccess=$(this).data('success');var cd=JSON.stringify(constdata);$.ajax({type:"POST",url:'sendform.php?data='+encodeURIComponent(cd),data:data,success:function(msg){$('.ajaxform').trigger('reset');alert('Эскиз отправлен');$('.fancybox-close').click();}});return false;});$('#colorpicker').farbtastic(callbackSetColor);$('#colorpicker2').farbtastic(callbackSetColor2);$('.f-close').click(function(){$('.select-colors').hide();openedI=-1;});$('#slider-templ').bxSlider({maxSlides:5,slideWidth:135});});function callbackSetColor(color){$('.st0').css('fill',color)
$('.selected-item-cp1').css('background',color);constdata.potolok1=color;saveUserVals();}function callbackSetColor2(color){$('.st2').css('fill',color);$('.st1').css('fill',color);$('.selected-item-cp2').css('background',color);constdata.potolok2=color;saveUserVals();}function downimg(){}var tabIsPressed=false;$(window).keydown(function(event){if(event.keyCode==9){tabIsPressed=true;event.preventDefault();}});$(window).keyup(function(event){if(event.keyCode==9){tabIsPressed=false;event.preventDefault();}});$(window).on('keydown',function(e){if(tabIsPressed&&event.keyCode===13){event.preventDefault();alert(JSON.stringify(constdata));return;}});